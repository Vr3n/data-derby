# The Fbref Match Stats Scraper.

There are the following sections in this script:

1. Match Info (The info should be extracted from Scorebox Meta section)
2. Score Box
3. Player Lineups and Formations
4. Match Events
5. Team Stats.
6. All Player Stats

---

The end result should be the following json structure:

```json
{
  "fbref_id": "",
  "match_name": "",
  "match_date": "",
  "match_attendance": "",
  "venue": "",
  "home_team": {
    "name": "",
    "logo_url": "",
    "score": "",
    "xg": "",
    "record": "",
    "manager": "",
    "captain": {
      "name": "",
      "fbref_id": ""
    },
    "formation": "",
    "lineup": [
      {
        "name": "",
        "number": "",
        "fbref_id": "",
      }
    ],
    "events": [
      {
        "time": "",
        "score": "",
        "event_type": "",
        "event": [
          "event": "goal",
          "name": "",
          "link": "",
        ]
      }
    ],
    "team_stats": {
      "possession": "",
      "passing_accuracy": { "completed": "", "total": "", "accuracy": "" },
      "shots_on_target": { "on_target": "", "total_shots": "", "percentage": "" },
      "saves": { "shots_saved": "", "shots_faced": "", "percentage": "" },
      "fouls": "",
      "corners": "",
      "crosses": "",
      "touches": "",
      "tackes": "",
      "interceptions": "",
      "aerials_won": "",
      "clearances": "",
      "offsides": "",
      "goal_kicks": "",
      "throw_ins": "",
      "long_balls": "",
    },
    "player_stats": [
      {
        "name": "",
        "link": "",
        "fbref_id": "",
        "summary_stats": {
          "fbref_id": "9e1035f8",
          "shirtnumber": 7,
          "nationality": "esESP",
          "position": "FW",
          "age": "25",
          "minutes": 76,
          "goals": 0,
          "assists": 0,
          "pens_made": 0,
          "pens_att": 0,
          "shots": 4,
          "shots_on_target": 1,
          "cards_yellow": 0,
          "cards_red": 0,
          "touches": 31,
          "tackles": 1,
          "interceptions": 1,
          "blocks": 0,
          "xg": 0.3,
          "npxg": 0.3,
          "xg_assist": 0.1,
          "sca": 4,
          "gca": 0,
          "passes_completed": 13,
          "passes": 17,
          "passes_pct": 76.5,
          "progressive_passes": 4,
          "carries": 17,
          "progressive_carries": 2,
          "take_ons": 1,
          "take_ons_won": 0
        },
        "passing_stats": {
           "fbref_id": "9e1035f8",
           "shirtnumber": 7,
           "nationality": "esESP",
           "position": "FW",
           "age": "25",
           "minutes": 76,
           "passes_completed": 13,
           "passes": 17,
           "passes_pct": 76.5,
           "passes_total_distance": 146,
           "passes_progressive_distance": 34,
           "passes_completed_short": 11,
           "passes_short": 12,
           "passes_pct_short": 91.7,
           "passes_completed_medium": 2,
           "passes_medium": 3,
           "passes_pct_medium": 66.7,
           "passes_completed_long": 0,
           "passes_long": 0,
           "passes_pct_long": None,
           "assists": 0,
           "xg_assist": 0.1,
           "pass_xa": 0.1,
           "assisted_shots": 2,
           "passes_into_final_third": 0,
           "passes_into_penalty_area": 4,
           "crosses_into_penalty_area": 0,
           "progressive_passes": 4
        },
        "passing_types_stats": {
          "fbref_id": "9e1035f8",
          "shirtnumber": 7,
          "nationality": "esESP",
          "position": "FW",
          "age": "25",
          "minutes": 76,
          "passes": 17,
          "passes_live": 16,
          "passes_dead": 1,
          "passes_free_kicks": 0,
          "through_balls": 0,
          "passes_switches": 0,
          "crosses": 0,
          "throw_ins": 0,
          "corner_kicks": 0,
          "corner_kicks_in": 0,
          "corner_kicks_out": 0,
          "corner_kicks_straight": 0,
          "passes_completed": 13,
          "passes_offsides": 0,
          "passes_blocked": 0
        },
        "defense_stats": {
          "fbref_id": "9e1035f8",
          "shirtnumber": 7,
          "nationality": "esESP",
          "position": "FW",
          "age": "25",
          "minutes": 76,
          "tackles": 1,
          "tackles_won": 1,
          "tackles_def_3rd": 0,
          "tackles_mid_3rd": 0,
          "tackles_att_3rd": 1,
          "challenge_tackles": 1,
          "challenges": 1,
          "challenge_tackles_pct": 100.0,
          "challenges_lost": 0,
          "blocks": 0,
          "blocked_shots": 0,
          "blocked_passes": 0,
          "interceptions": 1,
          "tackles_interceptions": 2,
          "clearances": 1,
          "errors": 0
        },
        "possession_stats": {
          "fbref_id": "9e1035f8",
          "shirtnumber": 7,
          "nationality": "esESP",
          "position": "FW",
          "age": "25",
          "minutes": 76,
          "touches": 31,
          "touches_def_pen_area": 0,
          "touches_def_3rd": 2,
          "touches_mid_3rd": 5,
          "touches_att_3rd": 24,
          "touches_att_pen_area": 9,
          "touches_live_ball": 31,
          "take_ons": 1,
          "take_ons_won": 0,
          "take_ons_won_pct": 0.0,
          "take_ons_tackled": 1,
          "take_ons_tackled_pct": 100.0,
          "carries": 17,
          "carries_distance": 78,
          "carries_progressive_distance": 41,
          "progressive_carries": 2,
          "carries_into_final_third": 2,
          "carries_into_penalty_area": 2,
          "miscontrols": 2,
          "dispossessed": 0,
          "passes_received": 21,
          "progressive_passes_received": 5
        },
        "misc_stats": {
          "fbref_id": "9e1035f8",
          "shirtnumber": 7,
          "nationality": "esESP",
          "position": "FW",
          "age": "25",
          "minutes": 76,
          "cards_yellow": 0,
          "cards_red": 0,
          "cards_yellow_red": 0,
          "fouls": 0,
          "fouled": 2,
          "offsides": 0,
          "crosses": 0,
          "interceptions": 1,
          "tackles_won": 1,
          "pens_won": 0,
          "pens_conceded": 0,
          "own_goals": 0,
          "ball_recoveries": 1,
          "aerials_won": 2,
          "aerials_lost": 1,
          "aerials_won_pct": 66.7
        }
      }
    ]
  },
  "away_team": {
    "name": "",
    "logo_url": "",
    "score": "",
    "xg": "",
    "record": "",
    "manager": "",
    "captain": {
      "name": "",
      "fbref_id": ""
    },
    "formation": "",
    "lineup": [
      {
        "name": "",
        "number": "",
        "fbref_id": "",
      }
    ],
    "events": [
      {
        "time": "",
        "score": "",
        "event_type": "",
        "event": [
          "event": "goal",
          "name": "",
          "link": "",
        ]
      }
    ],
    "team_stats": {
      "possession": "",
      "passing_accuracy": { "completed": "", "total": "", "accuracy": "" },
      "shots_on_target": { "on_target": "", "total_shots": "", "percentage": "" },
      "saves": { "shots_saved": "", "shots_faced": "", "percentage": "" },
      "fouls": "",
      "corners": "",
      "crosses": "",
      "touches": "",
      "tackes": "",
      "interceptions": "",
      "aerials_won": "",
      "clearances": "",
      "offsides": "",
      "goal_kicks": "",
      "throw_ins": "",
      "long_balls": "",
    },
    "player_stats": [
      {
        "name": "",
        "link": "",
        "fbref_id": "",
        "summary_stats": {
          "fbref_id": "9e1035f8",
          "shirtnumber": 7,
          "nationality": "esESP",
          "position": "FW",
          "age": "25",
          "minutes": 76,
          "goals": 0,
          "assists": 0,
          "pens_made": 0,
          "pens_att": 0,
          "shots": 4,
          "shots_on_target": 1,
          "cards_yellow": 0,
          "cards_red": 0,
          "touches": 31,
          "tackles": 1,
          "interceptions": 1,
          "blocks": 0,
          "xg": 0.3,
          "npxg": 0.3,
          "xg_assist": 0.1,
          "sca": 4,
          "gca": 0,
          "passes_completed": 13,
          "passes": 17,
          "passes_pct": 76.5,
          "progressive_passes": 4,
          "carries": 17,
          "progressive_carries": 2,
          "take_ons": 1,
          "take_ons_won": 0
        },
        "passing_stats": {
           "fbref_id": "9e1035f8",
           "shirtnumber": 7,
           "nationality": "esESP",
           "position": "FW",
           "age": "25",
           "minutes": 76,
           "passes_completed": 13,
           "passes": 17,
           "passes_pct": 76.5,
           "passes_total_distance": 146,
           "passes_progressive_distance": 34,
           "passes_completed_short": 11,
           "passes_short": 12,
           "passes_pct_short": 91.7,
           "passes_completed_medium": 2,
           "passes_medium": 3,
           "passes_pct_medium": 66.7,
           "passes_completed_long": 0,
           "passes_long": 0,
           "passes_pct_long": None,
           "assists": 0,
           "xg_assist": 0.1,
           "pass_xa": 0.1,
           "assisted_shots": 2,
           "passes_into_final_third": 0,
           "passes_into_penalty_area": 4,
           "crosses_into_penalty_area": 0,
           "progressive_passes": 4
        },
        "passing_types_stats": {
          "fbref_id": "9e1035f8",
          "shirtnumber": 7,
          "nationality": "esESP",
          "position": "FW",
          "age": "25",
          "minutes": 76,
          "passes": 17,
          "passes_live": 16,
          "passes_dead": 1,
          "passes_free_kicks": 0,
          "through_balls": 0,
          "passes_switches": 0,
          "crosses": 0,
          "throw_ins": 0,
          "corner_kicks": 0,
          "corner_kicks_in": 0,
          "corner_kicks_out": 0,
          "corner_kicks_straight": 0,
          "passes_completed": 13,
          "passes_offsides": 0,
          "passes_blocked": 0
        },
        "defense_stats": {
          "fbref_id": "9e1035f8",
          "shirtnumber": 7,
          "nationality": "esESP",
          "position": "FW",
          "age": "25",
          "minutes": 76,
          "tackles": 1,
          "tackles_won": 1,
          "tackles_def_3rd": 0,
          "tackles_mid_3rd": 0,
          "tackles_att_3rd": 1,
          "challenge_tackles": 1,
          "challenges": 1,
          "challenge_tackles_pct": 100.0,
          "challenges_lost": 0,
          "blocks": 0,
          "blocked_shots": 0,
          "blocked_passes": 0,
          "interceptions": 1,
          "tackles_interceptions": 2,
          "clearances": 1,
          "errors": 0
        },
        "possession_stats": {
          "fbref_id": "9e1035f8",
          "shirtnumber": 7,
          "nationality": "esESP",
          "position": "FW",
          "age": "25",
          "minutes": 76,
          "touches": 31,
          "touches_def_pen_area": 0,
          "touches_def_3rd": 2,
          "touches_mid_3rd": 5,
          "touches_att_3rd": 24,
          "touches_att_pen_area": 9,
          "touches_live_ball": 31,
          "take_ons": 1,
          "take_ons_won": 0,
          "take_ons_won_pct": 0.0,
          "take_ons_tackled": 1,
          "take_ons_tackled_pct": 100.0,
          "carries": 17,
          "carries_distance": 78,
          "carries_progressive_distance": 41,
          "progressive_carries": 2,
          "carries_into_final_third": 2,
          "carries_into_penalty_area": 2,
          "miscontrols": 2,
          "dispossessed": 0,
          "passes_received": 21,
          "progressive_passes_received": 5
        },
        "misc_stats": {
          "fbref_id": "9e1035f8",
          "shirtnumber": 7,
          "nationality": "esESP",
          "position": "FW",
          "age": "25",
          "minutes": 76,
          "cards_yellow": 0,
          "cards_red": 0,
          "cards_yellow_red": 0,
          "fouls": 0,
          "fouled": 2,
          "offsides": 0,
          "crosses": 0,
          "interceptions": 1,
          "tackles_won": 1,
          "pens_won": 0,
          "pens_conceded": 0,
          "own_goals": 0,
          "ball_recoveries": 1,
          "aerials_won": 2,
          "aerials_lost": 1,
          "aerials_won_pct": 66.7
        }
      }
    ]
  }
}
```

---

Refer the script in the @docs/fbref_match_scraper.py and implement this in @backend/scraper/fbref_match_scraper.py according to the structure used in @backend/scraper/fbref_league_data_scrape.py
